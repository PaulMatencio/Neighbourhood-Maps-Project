Number.prototype.mod=function(e){return(this%e+e)%e},$(function(){function e(){var e=this,t=new gMaps(mapOptions,mapStyle),r=t.map,s=(t.infoWindow,t.getCurrentLocation()),n=t.marker_animation;e.nearByPlaces=ko.observableArray([]),e.showResults=ko.observable(!0),e.placeReviews=ko.observableArray([]),e.placePhotos=ko.observableArray([]),e.placeInFocus=ko.observable(),e.foursquarePlaces=ko.observableArray([]),t.self=e,e.getAddress=function(e){if(e.vicinity){var t=e.vicinity.indexOf(",");return e.vicinity.slice(0,t)}return e.formatted_address},e.toggleResults=function(){1==e.showResults()?e.showResults(!1):e.showResults(!0)},e.icons=ko.computed(function(){var t=new Set,r=[];for(var s in e.nearByPlaces())s&&t.add(e.nearByPlaces()[s].icon);return t.forEach(function(e){r.push({icon:e})}),r.slice(0,20)}),e.rateImg=function(e){e=Math.round(2*e)/2;for(var t=[],r=0;r<parseInt(e);r++)t.push({star:"images/full-star.png"});for(e-parseInt(e)!==0&&t.push({star:"images/half-star.png"}),r=0;r<parseInt(5-e);r++)t.push({star:"images/empty-star.png"});return t},e.formattedType=function(e){var t=e.types[0].replace(/[_-]/g," ");return t.charAt(0).toUpperCase()+t.substr(1,t.length)},t.nearbySearch(s),t.initAutocomplete(),e.getWebsite=function(e){return e.website?e.website:""},e.clickMarker=function(e){var r=e.name.toLowerCase();t.markers.forEach(function(e){e.title.toLowerCase()===r&&google.maps.event.trigger(e,"click")})},$("#filters").on("click","button",function(){function e(e){return-1!=e.toLowerCase().indexOf(s.substring(0,4))?e:void 0}n=google.maps.Animation.DROP;var s=$(this).children("img").attr("src").split("/").slice(-1)[0].split("-").slice(0,1)[0];myCategories=mapPlaceTypes.filter(e),t.nearbySearch(r.getCenter())}),$("#reset").on("click",function(){myCategories=[],t.nearbySearch(r.getCenter())})}ko.applyBindings(new e),$("#hide").click(function(){var e="",t=$(this).children("span").attr("class");e="left"===t.slice(29)?t.replace("left","right"):t.replace("right","left"),$(this).siblings("div").animate({width:"toggle"},500),$(this).children("span").attr("class",e)})});