$(function(){function e(){var e=this,t=new gMaps(mapOptions,mapStyle),r=t.map,a=(t.infoWindow,t.getCurrentLocation()),s=t.marker_animation;e.nearByPlaces=ko.observableArray([]),e.showResults=ko.observable(!0),e.placeReviews=ko.observableArray([]),e.placePhotos=ko.observableArray([]),e.placeInFocus=ko.observable(),e.foursquarePlaces=ko.observableArray([]),t.self=e,e.getAddress=function(e){if(e.vicinity){var t=e.vicinity.indexOf(",");return e.vicinity.slice(0,t)}return e.formatted_address},e.toggleResults=function(){1==e.showResults()?e.showResults(!1):e.showResults(!0)},e.icons=ko.computed(function(){var t=new Set,r=[];for(var a in e.nearByPlaces())a&&t.add(e.nearByPlaces()[a].icon);return t.forEach(function(e){r.push({icon:e})}),r.slice(0,20)}),e.rateStar=function(e){for(var t=Math.round(e),r=e-t,a=[],s=r>0?4-t:5-t,n=0;t>n;n++)a.push({star:"images/full-star.png"});for(r>0&&a.push({star:"images/half-star.png"}),n=0;s>n;n++)a.push({star:"images/empty-star.png"});return a},e.formattedType=function(e){var t=e.types[0].replace(/[_-]/g," ");return t.charAt(0).toUpperCase()+t.substr(1,t.length)},t.nearbySearch(a),t.initAutocomplete(),e.getWebsite=function(e){return e.website?e.website:""},e.clickMarker=function(e){var r=e.name.toLowerCase();t.markers.forEach(function(e){e.title.toLowerCase()===r&&google.maps.event.trigger(e,"click")})},$("#filters").on("click","button",function(){function e(e){return-1!=e.toLowerCase().indexOf(a.substring(0,4))?e:void 0}s=google.maps.Animation.DROP;var a=$(this).children("img").attr("src").split("/").slice(-1)[0].split("-").slice(0,1)[0];myCategories=mapPlaceTypes.filter(e),t.nearbySearch(r.getCenter())}),$("#reset").on("click",function(){myCategories=[],t.nearbySearch(r.getCenter())})}ko.applyBindings(new e),$("#hide").click(function(){var e="",t=$(this).children("span").attr("class");e="left"===t.slice(29)?t.replace("left","right"):t.replace("right","left"),$(this).siblings("div").animate({width:"toggle"},500),$(this).children("span").attr("class",e)})});