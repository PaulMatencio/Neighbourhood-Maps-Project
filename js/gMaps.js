function gMaps(e,t){localStorage.mapCenter&&(e.center=JSON.parse(localStorage.mapCenter)),this.mapCenter=e.center,console.log(e.center),this.map=new google.maps.Map(document.querySelector("#map-canvas"),e),this.infoWindow=new google.maps.InfoWindow({pixelOffset:new google.maps.Size(-23,-10),maxWidth:300}),this.marker_animation=google.maps.Animation.DROP,this.styledMap=new google.maps.StyledMapType(t,{name:"Styled Map"}),this.map.mapTypes.set("map_style",this.styledMap),this.map.setMapTypeId("map_style"),this.markers=[]}gMaps.prototype.getCurrentLocation=function(){var e={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){this.mapCenter={lat:e.coords.latitude,lng:e.coords.longitude}},function(){this.mapCenter=this.map.getCenter()}.bind(this),e):this.mapCenter=this.map.getCenter(),mapCenter},gMaps.prototype.nearbySearch=function(e){var t=this,a=new google.maps.places.PlacesService(t.map);a.nearbySearch({location:e,radius:radius,types:myCategories},t.getResults.bind(t))},gMaps.prototype.getResults=function(e,t,a){function o(e){return"political"==e}var n=new google.maps.LatLngBounds,i=this.self;i.nearByPlaces([]),t==google.maps.places.PlacesServiceStatus.OK&&(e.forEach(function(e){0==e.types.filter(o).length&&(i.nearByPlaces.push(e),n.extend(e.geometry.location))}),this.map.fitBounds(n),this.createMarkers(i.nearByPlaces()))},gMaps.prototype.initAutocomplete=function(){function e(){var e=i.getPlaces(),a=e.length;a>0&&(1==a?(t.mapCenter=e[0].geometry.location,t.nearbySearch(t.mapCenter),localStorage.mapCenter=JSON.stringify(t.mapCenter)):(o.nearByPlaces(e),t.createMarkers(e))),n.value=""}var t=this,a=this.map,o=this.self,n=document.getElementById("search-input"),i=new google.maps.places.SearchBox(n);a.addListener("bounds_changed",function(){i.setBounds(a.getBounds()),mapCenter=a.getCenter()}),i.addListener("places_changed",e)},gMaps.prototype.createMarkers=function(e){var t=Math.sqrt($(window).width())+20,a=this;this.markers.forEach(function(e){e.setMap(null)}),this.markers=[],e.forEach(function(e){var o={url:e.icon,size:new google.maps.Size(t,t),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(t/4,t/2),scaledSize:new google.maps.Size(t/2.8,t/2.8)},n=new google.maps.Marker({map:a.map,icon:o,title:e.name,animation:a.marker_animation,position:e.geometry.location}),i=window.innerWidth,r=window.innerHeight,s=150,c=-r/5;750>i&&(s=-20,c=-1*(r/2-100)),n.addListener("click",function(){a.markers.forEach(function(e){e.setAnimation(null)}),null!==n.getAnimation()?n.setAnimation(null):(n.setAnimation(google.maps.Animation.BOUNCE),a.map.panTo(n.position),a.map.panBy(s,c))}),a.markers.push(n),google.maps.event.addListener(n,"click",function(){a.addInfoWindow(e,n)})})},gMaps.prototype.addInfoWindow=function(e,t){var a=new google.maps.places.PlacesService(this.map),o=this,n=this.self,i=this.infoWindow;a.getDetails({placeId:e.place_id},function(e,a){if(a===google.maps.places.PlacesServiceStatus.OK){var r=n.getWebsite(e),s=$('script[data-template="reviews"]').html(),c=s.replace(/{{name}}/,e.name).replace(/{{formatted_address}}/,e.formatted_address).replace(/{{opening}}/,o.getOpenings(e)).replace(/{{rating}}/,o.getRating(e)).replace(/{{photos}}/,o.getPhotoes(e));if(i.setContent(c.replace(/{{website}}/g,r).replace(/{{phone}}/,o.getPhone(e))),i.open(o.map,t),$(".infoWindow").fadeIn(500),n.placePhotos(e.photos),e.photos){var l=e.photos.length;$("#photos").click(function(){function e(e){previous=a,a=(a+e)%l,a=0>a?l-1:a;var o=$("#frame").children();o.eq(previous).hide(),o.eq(a).show(),t(a)}function t(e){$("#photoCounter").text(e+"/"+l)}$("#photo-page").show(),$("#backward").show(),$("#forward").show();var a=0;e(0),$("#forward").click(function(){e(1)}),$("#backward").click(function(){e(-1)}),$("#close-photo").click(function(){$("#frame").children().hide(),$("#backward").hide(),$("#backward").hide(),$("#photo-page").hide()})})}var p=$("#reviews");p&&p.click(function(){n.placeReviews([]),n.placeInFocus(e),e.reviews.forEach(function(e){""!==e.text&&n.placeReviews.push(e)});var t=$("#review-page"),a=$("#reviews");t.show(),a.children().show(),$("#close-review").click(function(){a.children().hide(),t.hide()})});var g=$("#nytLink");g&&g.click(function(){n.nytarticles(n.getNytArticle(e));var t=$("#nytimes-page");t.show(),$("#close-nytimes").click(function(){t.hide()})});var g=$("#wikiLink");g&&g.click(function(){var t=$("#wiki-page");n.nytarticles(n.openSearchWikipedia(e)),t.show(),$("#close-wiki").click(function(){t.hide()})});var m=$("#streetLink");m&&m.click(function(){n.streetview(n.getStreetView(e));var t=$("#street-page");t.show(),$("#close-street").click(function(){t.hide()})});var h=document.getElementById("fourLink");h&&h.addEventListener("click",function(){n.foursquarePlaces(getFourSquare(e)),$("#foursquare-page").show(),$("#close-foursquare").click(function(){$("#foursquare").children().hide(),$("#foursquare-page").hide()})})}}),google.maps.event.addListener(i,"closeclick",function(){o.markers.forEach(function(e){e.setAnimation(null)}.bind(this))})},gMaps.prototype.getRating=function(e){var t=this.self,a="",o=t.rateStar(e.rating);if(e.rating){a='<div><span style="color: #df6d15; padding-right: 3px;">'+e.rating+"</span>";for(var n in o)n&&(a+='<img class="rate-star" src="'+o[n].star+'" />');return a+='<span class="rating"> Users rating:'+e.user_ratings_total+"</span>",a+'<a id="reviews"  href="#"">Reviews,</a>'}return'<span style="font-style: italic;">no rating available</span>'},gMaps.prototype.getPhone=function(e){return e.international_phone_number?e.international_phone_number:"<span>Location:"+e.geometry.location+"</span>"},gMaps.prototype.getPhotoes=function(e){return e.photos&&e.photos.length>1?'<a style="margin-left: 5px;" id="photos" href="#"">Photos</a>':'<div id="photos"></div></div>'},gMaps.prototype.getOpenings=function(e){var t;try{t="Mon-Sat:"+e.opening_hours.periods[1].open.time+"-"+e.opening_hours.periods[1].close.time+" Sun:"+e.opening_hours.periods[0].open.time+"-"+e.opening_hours.periods[0].close.time}catch(a){t="Work time not available"}return t};var mapPlaceTypes=["accounting","airport","amusement_park","aquarium","art_gallery","atm","bakery","bank","bar","beauty_salon","bicycle_store","book_store","bowling_alley","bus_station","cafe","campground","car_dealer","car_rental","car_repair","car_wash","casino","cemetery","church","city_hall","clothing_store","convenience_store","courthouse","dentist","department_store","doctor","electrician","electronics_store","embassy","establishment","finance","fire_station","florist","food","funeral_home","furniture_store","gas_station","general_contractor","grocery_or_supermarket","gym","hair_care","hardware_store","health","hindu_temple","home_goods_store","hospital","insurance_agency","jewelry_store","laundry","lawyer","library","liquor_store","local_government_office","locksmith","lodging","meal_delivery","meal_takeaway","mosque","movie_rental","movie_theater","moving_company","museum","night_club","painter","park","parking","pet_store","pharmacy","physiotherapist","place_of_worship","plumber","police","post_office","real_estate_agency","restaurant","roofing_contractor","rv_park","school","shoe_store","shopping_mall","spa","stadium","storage","store","subway_station","synagogue","taxi_stand","train_station","travel_agency","university","veterinary_care","zoo"],mapStyle=[{featureType:"road.local",elementType:"labels",stylers:[{hue:"#00a1ff"},{gamma:.8}]},{featureType:"road.highway",stylers:[{lightness:12},{gamma:1.31},{hue:"#ffa200"}]},{featureType:"landscape.natural"}],mapCenter={lat:52.3702,lng:4.8953},winWidth=$(window).width(),myCategories=[],radius=2e3,today=new Date;localStorage.myCategories&&(myCategories=JSON.parse(localStorage.myCategories));var mapOptions={center:mapCenter,zoomControl:!0,zoom:14,minZoom:3,maxZoom:18,disableDefaultUI:!0,streetViewControl:!0};