Number.prototype.mod=function(e){return(this%e+e)%e},$(function(){function e(){function e(e){var t=$(".infolist"),i=$(".infolist").scrollLeft(),n=parseInt(i/(winWidth-26));n+=e,t.animate({scrollLeft:n*winWidth-26*n},1e3)}function t(){$(window).width()<800&&($("#next-list").children().show(),$(".row").css("width",winWidth),$(".col-md-8").css("width",winWidth-2*($(".navigator").width()+26)))}var i=this,n=new gMaps(mapOptions,mapStyle),r=n.map,s=(n.infoWindow,n.getCurrentLocation()),a=n.marker_animation;i.nearByPlaces=ko.observableArray([]),i.placeReviews=ko.observableArray([]),i.placePhotos=ko.observableArray([]),i.placeInFocus=ko.observable(),i.foursquarePlaces=ko.observableArray([]),n.self=i,i.getAddress=function(e){if(e.vicinity){var t=e.vicinity.indexOf(",");return e.vicinity.slice(0,t)}return e.formatted_address},i.icons=ko.computed(function(){var e=new Set,t=[];for(var n in i.nearByPlaces())n&&e.add(i.nearByPlaces()[n].icon);return e.forEach(function(e){t.push({icon:e})}),t.slice(0,20)}),i.rateImg=function(e){e=Math.round(2*e)/2;for(var t=[],i=0;i<parseInt(e);i++)t.push({star:"images/full-star.png"});for(e-parseInt(e)!==0&&t.push({star:"images/half-star.png"}),i=0;i<parseInt(5-e);i++)t.push({star:"images/empty-star.png"});return t},i.formattedType=function(e){var t=e.types[0].replace(/[_-]/g," ");return t.charAt(0).toUpperCase()+t.substr(1,t.length)},n.nearbySearch(s),n.initAutocomplete(),i.getWeb=function(e){return e.website?e.website:""},i.clickMarker=function(e){var t=e.name.toLowerCase();n.markers.forEach(function(e){e.title.toLowerCase()===t&&google.maps.event.trigger(e,"click")})},$("#filters").on("click","button",function(){function e(e){return-1!=e.toLowerCase().indexOf(t.substring(0,4))?e:void 0}a=google.maps.Animation.DROP;var t=$(this).children("img").attr("src").split("/").slice(-1)[0].split("-").slice(0,1)[0];myCategories=mapPlaceTypes.filter(e),n.nearbySearch(r.getCenter())}),$("#reset").on("click",function(){myCategories=[],n.nearbySearch(r.getCenter())}),$("#prev-list").children().hide(),$("#next-list").children().hide(),$("#prev-list").children().click(function(){var t=$(".infolist").scrollLeft()/(winWidth-26);e(t===parseInt(t,10)?-1:0)}),$("#next-list").children().click(function(){var t=$(".infolist").scrollLeft()/(winWidth-26);e(t===parseInt(t,10)?1:0)}),$(".infolist").scroll(function(){var e=$(this).children("li").length;$(this).scrollLeft()<winWidth/3?$("#prev-list").children().hide():$(this).scrollLeft()>(e-2)*winWidth?$("#next-list").children().hide():($("#prev-list").children().show(),$("#next-list").children().show())}),t(),$(window).resize(function(){t()});var o=0,l=$(".infolist");setInterval(function(){var t=l.children("li").length,i=l.scrollLeft()/(winWidth-26);i>t-2||i!==parseInt(i,10)&&(o>i?e(0):i>o&&e(1),o=Math.round(i))},1200)}ko.applyBindings(new e),$("#hide").click(function(){var e="",t=$(this).children("span").attr("class");e="left"===t.slice(29)?t.replace("left","right"):t.replace("right","left"),$(this).siblings("div").animate({width:"toggle"},500),$(this).children("span").attr("class",e)})});